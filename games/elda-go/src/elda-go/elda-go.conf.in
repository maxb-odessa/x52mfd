#
# simple elda config
#
# block must start with bare keyword
# block data must start with blank
#
#              
#

source
    handler stdin
    name IN

source
    name JOURNAL
    handler filein
    var dir @HOME@/.ed/journal/
    var mask ^Journal\.\d+\.\d+\.log$

action
    name XDOLOCAL
    handler xdo            
    var display :0.0          
    var window edpad-text

action
    name LOG
    handler fileout
    var path @HOME@/.ed/elda-go.log
    var truncate yes
    var create yes

action
    name OUT
    handler stdout

source
    name TICK10S
    handler ticker
    var interval 10
    var message tick 10 seconds

source
    name PIPE
    handler pipein
    var path /tmp/elda-go-out.pipe

action
    name PIPE
    handler pipeout
    var path /tmp/x52-in.pipe

event
    source JOURNAL "event":"FSSDiscoveryScan".+"BodyCount":([0-9]+), "NonBodyCount":([0-9]+),
    action OUT mfd 3 "Signals: $1/$2"
    action OUT update
    action LOG | Signals:    $1/$2\n

event
    source TICK10S tick 10 seconds
    action OUT clock local 24hr ddmmyy
    action OUT update

event
    source JOURNAL "event":"FSDJump", "Taxi":false,
    action OUT bri led 30%
    action OUT bri mfd 30%
    action OUT update

event
    source JOURNAL "event":"StartJump", "JumpType":"Hyperspace", "StarSystem":"(.+ .+) (.+)",.+"StarClass":"(\w)"
    action OUT mfd 2 " $3,$2"
    action OUT bri led 5%
    action OUT bri mfd 5%
    action OUT update

event
    source JOURNAL "event":"FSDTarget", "Name":"(.+ .+) (.+)", .+"StarClass":"(.+)", "RemainingJumpsInRoute":(\d+)
    action OUT mfd 1 "~$3,$2 ($4)"
    action OUT mfd 3 "Not Scanned"
    action OUT update
    action LOG +-------------------------------\n\n
    action LOG  Next: $3,$2, Jumps left: $4\n

event
    source JOURNAL "event":"Scan", "ScanType":".+", "BodyName":"([0-9a-zA-Z- ]+)([a-zA-Z]\d-?\d*)(| [aA]+)", .+"StarType":"(\w+)", "Subclass":(\d+), .+"WasDiscovered":(\w+), "
    action OUT mfd 2 " $4,$2,$6"
    action OUT update
    action LOG +-------------------------------\n
    action LOG | Class:      $4$5\n
    action LOG | Name:       $1 $2\n
    action LOG | Discovered: $6\n

event
    source JOURNAL "event":"Scan", "ScanType":".+", "BodyName":"([0-9a-zA-Z- ]+)([a-zA-Z]\d-?\d*) [0-9b-zB-Z]+", .+"StarType":"(\w+)", "Subclass":(\d+), .+"WasDiscovered":(\w+), "
    action LOG |-> $3$4\n

event
    source JOURNAL "event":"DockingGranted",
    action OUT blink on
    action OUT update

event
    source JOURNAL "event":"Docked",
    action OUT blink off
    action OUT update

event
    source IN ^CONNECTED$
    action OUT mfd 1 "Hello,"
    action OUT mfd 2 " commander"
    action OUT mfd 3 "  Vessae!"
    action OUT bri led 30% 
    action OUT bri mfd 30%
    action OUT blink off
    action OUT led a red
    action OUT led b red
    action OUT led t1 green
    action OUT led t2 green
    action OUT led t3 green
    action OUT clock local 24hr ddmmyy
    action OUT update


